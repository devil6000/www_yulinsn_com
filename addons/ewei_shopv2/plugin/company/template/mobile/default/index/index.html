{template '_header'}
<style type="text/css">
    .fui-page { background-color: #ffffff;}
    .header-color { background-color: #138ae2;}
    .fui-header a.back:before { border-color: #ffffff;}
    .fui-header:after { border-bottom: none;}
    .fui-searchbar { background: linear-gradient(#1897d0,#23c097);}
    .fui-company-desc { position: absolute; border: 0; height: 5rem; background: #ffffff; width: 100%; display: flex;}
</style>
<div class="fui-page fui-page-current">
    <div class="fui-header header-color">
        <div class="fui-header-left"><a class="back"></a></div>
        <div class="title" style="color: #ffffff;">企业地图</div>
        <div class="fui-header-right"></div>
    </div>
    <div class="fui-content">
        <form action="{php echo mobileUrl('company')}" method="post">
            <div class="fui-searchbar">
                <div class="searchbar center">
                    <div class="search-input">
                        <input type="search" name='keywords' class="search" placeholder="输入关键字...">
                    </div>
                </div>
            </div>
        </form>
        <div class="fui-page-map" id="container" style="width: 100%; height: calc(100% - 7.2rem);"></div>
        <div class="fui-company-desc">
            <div class="fui-company-logo"><img src="" /></div>
            <div class="fui-company-info">
                <div class="fui-company-name"></div>
                <div class="fui-company-address"></div>
                <div class="fui-company-distance"></div>
            </div>
            <div class="fui-company-navigation"></div>
        </div>
    </div>
</div>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=b6USN6hip8zFGCr1fH1fE2Is"></script>
<script type="text/javascript">
$(function () {
    var companys = {php echo json_encode($companys)};
    companys = eval(companys);

    var map = new BMap.Map("container");
    var point = new BMap.Point(companys[0].lng, companys[0].lat);
    map.centerAndZoom(point,15);
    map.enableScrollWheelZoom(true);
    var opts = {type: BMAP_NAVIGATION_CONTROL_SMALL};
    map.addControl(new BMap.NavigationControl(opts));

    //增加标识
    $.each(companys, function (i,element) {
        var icon = new BMap.Icon(element.logo, new BMap.Size(30,30), {
            anchor: new BMap.Size(30,30)
        });
        var marker = new BMap.Marker(new BMap.Point(element.lng,element.lat),{icon: icon});
        marker.addEventListener('click', function () {
            get_company(element);
        });
        map.addOverlay(marker);
    });

    function get_company(arr) {

    }

    //map.setCurrentCity("温州");
    /*
    var local = new BMap.LocalSearch(map,{
        renderOptions:{map: map}
    });
    local.search("温州市");
    */
})
</script>
{template '_footer'}